{
  "gitSyncId": "66de956ac05adf72589749ca_276d5075-3dc3-4581-abf3-e70cd6e05a88",
  "id": "Manage Product Catalog__1_INSERT_CATALOG",
  "pluginId": "mssql-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "DECLARE @ResultCode nvarchar(10)\n\t,@ResultMessages NVARCHAR(MAX)\n\t,@IMAGE_ID nvarchar(20)=NULL;\nIF @@TRANCOUNT = 0\nBEGIN TRANSACTION;\n\nif {{this.params.IMAGE_DATA?0:1}} = 0 \nEXECUTE [dbo].[UPDATE_IMAGE] \n   @BASE64 = {{this.params.IMAGE_DATA}}\n  ,@TABLE_NAME = 'PMS_CATALOG_PICTURE'\n  ,@USER_TOKEN = {{appsmith.store[Configs.userSession].TOKEN}}\n  ,@DELETE =0\n  ,@INSERT_IF_NOT_EXIST = 1\n  ,@IMAGE_ID = @IMAGE_ID OUTPUT\n\t\t,@ResultCode=@ResultCode OUTPUT\n\t\t,@ResultMessages=@ResultMessages OUTPUT\n\n\nif @ResultCode <> 'DONE'\nGOTO OUTPUT;\n\nEXEC\t[dbo].[UPDATE_PMS_PRODUCT_CATALOG_LM]\n\t\t@pType = {{PRODUCT_TYPE.selectedOptionValue.toString()}},\n\t\t@pNameEN = {{PRODUCT_NAME_EN.text}},\n\t\t@pNameTH = {{PRODUCT_NAME_TH.text}},\n\t\t@pUnit = {{UNIT.selectedOptionValue.toString()}},\n\t\t@pAvaliableUnit ={{AVAILABLE_UNIT.text}},\n\t\t@pTotalUnit = {{TOTAL_UNIT.text}},\n\t\t@pFloor ={{FLOOR_NO.selectedOptionValue.toString()}},\n\t\t@pStatus = {{STATUS.selectedOptionValue.toString()}},\n\t\t@pProductCatalogDetail = {{PRODUCT_DETAIL.text}},\n\t\t@PRODUCT_CODE = {{PRODUCT_CODE.text}},\n\t\t@ACCOUNT_CODE = {{ACCOUNT_CODE.text}},\n\t\t@IMAGE_ID = @IMAGE_ID\n\t\t,@USER_TOKEN = {{appsmith.store[Configs.userSession].TOKEN}}\n\t\t,@INSERT_IF_NOT_EXIST = 1\n\t\t,@PRODUCT_ID = NULL\n\t\t,@ResultCode=@ResultCode OUTPUT\n\t\t,@ResultMessages=@ResultMessages OUTPUT\n\t\t\nif @ResultCode <> 'DONE'\nGOTO OUTPUT;\n\t\t\nOUTPUT:\nif @ResultCode <> 'DONE'\nROLLBACK TRANSACTION;\nelse\nCOMMIT TRANSACTION;\nSELECT @ResultCode AS RESULT_CODE , @ResultMessages as RESULT_MESSAGES",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "UCL_PMS",
      "isAutoGenerated": false,
      "name": "UCL_PMS",
      "pluginId": "mssql-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "executeOnLoad": false,
    "name": "_1_INSERT_CATALOG",
    "pageId": "Manage Product Catalog",
    "userSetOnLoad": false
  }
}